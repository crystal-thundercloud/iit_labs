<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>ЛР3 Задание 4</title>

        <meta charset="utf-8"> <!-- для корректного вывода русского языка -->

        <script type="text/javascript">
            /*
            Написать код программной модели циклической очереди
            */

            // на основе аналогичного задания по ОСА

            var size = parseInt(prompt("Вы давно не разбирали свою личную библиотеку и решили рассортировать книги на круглой полке после их успешной сборки в башни." + "\nНа полку книги кладутся по часовой стрелке. Для удобства на первой книге всегда отметка, которая передвигается по часовой стрелке к следующей книге, если текущую книгу с отметкой сняли." + " Вы всегда снимаете только отмеченную книгу, чтобы не потерять начало." + "\n\nСколько максимально книг вы планируете поставить на полку?")); // получение размера очереди

            if (size <= 0) alert("Вы передумали сортировать книги. В конце концов, можно заняться этим завтра."); // если пользователь вдруг передумал работать с программой и ввёл число <= 0  -завершить работу

            else if (size > 0) { // если размер > 0

                var queue = new Array(); // задание очереди (без фиксированного размера, так как он всё равно не проверяет переполнение очереди)
                var choice, book; // переменные для ответов пользователя
                
                do {
                    choice = parseInt(prompt("Вы решили, что будете работать с полкой максимум из " + size + " книг(и)." + "\nТекущая полка: " + queue + ". Размер полки: " + queue.length + "\n\nДля работы с полкой доступны следующие команды: " + "\n 0 - добавить книгу на полку;" + "\n 1 - забрать книгу с полки;" + "\n 2 - завершить работу: ")); // вывод максимального размера очереди, элементов очереди, количества элементов в очереди; получение выбора пользователя
                    
                    switch(choice) {
                        case 0: // если пользователь ввёл 0
                            if (queue.length < size) { // если в очереди меньше элементов, чем максимальный размер
                                book = prompt("Вы решили поставить книгу на полку." + "\n\nВведите название книги, которую хотите поставить на полу: ", "Книга " + Math.floor(Math.random() * 100)); // получение элемента от пользователя либо сохранение случайного номера книги. случайное число в js всегда дробное на промежутке [0; 1), и, чтобы сделать случайное число от 0 до 99, нужно помножить полученное число на 100 и округлить
                                queue.push(book); // вставка элемента в конец очереди
                                alert("Вы аккуратно ставите книгу с названием \"" + book + "\" на полку."); // сообщение об успешной вставке
                            }
                            else alert("Вы решили поставить книгу на полку." + "\nК сожалению, лимит книг на полке уже достигнут, и вы откладываете книгу в сторону.");  // если очередь переполнена - сообщить пользователю о невозможности вставки (даже если сам js позволяет)

                            break;
                        case 1: // если пользователь ввёл 1
                            if (queue.length > 0) { // если очередь не пустая
                                book = queue.shift(); // получение элемента из начала очереди
                                alert("Самая первая книга - \"" + book + "\". Вы снимаете её с полки и откладываете в сторону."); // вывод полученного элемента и сообщение об успехе
                            }
                            else alert("К сожалению (или к радости) вы уже разобрали всю полку и в ней не осталось книг."); // если очередь пустая - сообщить пользователю о невоможности забрать элемент

                            break;
                        default: // если пользователь ввёл любое другое число - выход из свитча. если пользователь вввёл 2 - выход из цикла
                            break;
                    }
                }

                while (choice != 2);
                
                alert("Вы решили, что достаточно потрудились на сегодня, и отправились отдыхать."); // сообщение о завершении работы
            }

        </script>
    </head>

    <body>
    </body>
</html>