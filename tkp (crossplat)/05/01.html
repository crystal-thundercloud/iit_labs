<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>ЛР5 Задание 1</title>

        <meta charset="utf-8"> <!-- для корректного вывода русского языка -->
    </head>

    <body>
        <script type="text/javascript">
            /*
            Создать программную модель стека, используя объектно-ориентированный подход
            */

            var stack = {
                data: new Array,
                length: 0,
                maxsize: 1,

                pop() {
                    if (this.length > 0) {
                        let item = this.data.pop();
                        this.length--;
                        return item;
                    }
                    return "Пусто";
                },

                push(item) {
                    if (this.length < this.maxsize) {
                        this.data.push(item);
                        this.length++;
                        return 1;
                    }
                    return 0;
                }
            }

            // на основе аналогичного задания по ОСА
            var size = parseInt(prompt("Вы давно не разбирали свою личную библиотеку и решили составить башню из книг, чтобы потом рассортировать их." + "\nВ башне книги лежат друг на друге, и, чтобы снять определённую книгу, нужно сначала снять все книги над ней."+"\n\nСколько максимально книг вы планируете положить в башню?")); // получение размера стека

            if (size <= 0) alert("Вы передумали перебирать книги. В конце концов, можно заняться этим завтра.");

            else if (size > 0) {

                stack.maxsize = size; // задание стека
                var choice, book; // переменные для ответов пользователя
                
                do {
                    choice = parseInt(prompt("Вы решили, что будете работать с башней максимум из " + size + " книг(и)." + "\nТекущая башня: " + stack.data + ". Размер башни: " + stack.length + "\n\nДля работы с башней доступны следующие команды: " + "\n 0 - добавить книгу в башню;" + "\n 1 - забрать книгу из башни;" + "\n 2 - завершить работу: "));
                    
                    switch(choice) {
                        case 0:
                            if (stack.length < size) {
                                book = prompt("Вы решили положить книгу в башню." + "\n\nВведите название книги, которую хотите положить в башню: ", "Книга " + Math.floor(Math.random() * 100));
                                stack.push(book);
                                alert("Вы аккуратно кладёте книгу с названием \"" + book + "\" в башню.");
                            }
                            else alert("Вы решили положить книгу в башню." + "\nК сожалению, ваша башня уже слишком высокая, и вы откладываете книгу в сторону.");

                            break;
                        case 1:
                            if (stack.length > 0) {
                                book = stack.pop();
                                alert("Вы решили забрать книгу с башни." + "\nСамая верхняя книга - \"" + book + "\". Вы снимаете её с башни и откладываете в сторону.");
                            }
                            else alert("Вы решили забрать книгу с башни." + "\nК сожалению (или к радости) вы уже разобрали всю башню и в ней не осталось книг.");
                            
                            break;
                        default:
                            break;
                    }
                }

                while (choice != 2);
                
                alert("Вы решили, что достаточно потрудились на сегодня, и отправились отдыхать.");
            }
            
        </script>
    </body>
</html>
